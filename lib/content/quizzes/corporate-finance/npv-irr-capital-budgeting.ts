export const npvIrrCapitalBudgetingQuiz = [
    {
        id: 'npv-irr-q-1',
        question:
            'A manufacturing company is evaluating two mutually exclusive projects: Project X requires $50M investment and generates $15M annually for 5 years. Project Y requires $100M and generates $25M annually for 7 years. Both have the same risk profile (WACC = 12%). The CFO wants to choose Project X because it has higher IRR (15.2% vs 13.8%), but the finance team argues for Project Y due to higher NPV. Explain: (1) Calculate NPVs and IRRs for both projects, (2) Why do the metrics conflict?, (3) Perform incremental analysis, (4) Which project should they choose and why?, (5) How would you present this to the Board of Directors who may not understand the NPV vs IRR debate?',
        sampleAnswer:
            'Complete mutually exclusive project analysis: (1) Calculations: Project X: CF = [-50, 15, 15, 15, 15, 15]. NPV = -50 + Σ(15/(1.12)^t) = -50 + 54.05 = $4.05M. IRR: solve 0 = -50 + Σ(15/(1+IRR)^t) → IRR = 15.2%. Project Y: CF = [-100, 25, 25, 25, 25, 25, 25, 25]. NPV = -100 + Σ(25/(1.12)^t) = -100 + 114.12 = $14.12M. IRR = 13.8%. (2) Why conflict?: Scale difference. Project X has higher IRR (return per dollar) but lower absolute NPV (total value created). It\'s like choosing between 50% return on $10 ($5 profit) vs 30% return on $100 ($30 profit). Which is better? $30 > $5! (3) Incremental analysis: Incremental CF = Y - X = [-50, 10, 10, 10, 10, 10, 25, 25]. Incremental NPV = $14.12 - $4.05 = $10.07M. Incremental IRR = 13.1%. Question: "Is the extra $50M investment in Y worth it?" Answer: Yes! The incremental investment earns 13.1% IRR, which exceeds our 12% hurdle rate. Incremental NPV of $10.07M confirms this. (4) Choose Project Y: While X has higher IRR (15.2%), Y creates more absolute value ($14.12M vs $4.05M). We\'re in business to maximize shareholder wealth (dollars), not percentages. Assuming we can raise the capital, Y is superior. Even if capital constrained, Y\'s Profitability Index = 114.12/100 = 1.141 vs X\'s 54.05/50 = 1.081 shows better bang-for-buck. (5) Board presentation: "Both projects are good investments exceeding our 12% hurdle rate. However, Project Y creates $14.12M in value vs $4.05M for Project X—that\'s $10M more value for shareholders. Yes, X has a higher percentage return (15% vs 14%), but Y\'s larger scale means more absolute dollars. Think of it this way: Would you rather earn 15% on a $50 investment or 14% on $100? The second option makes you more money. Our recommendation: Proceed with Project Y." Emphasize NPV = actual dollars added to company value. IRR is useful for communication but NPV drives decisions.',
        keyPoints: [
            'Scale differences cause NPV and IRR to conflict: higher IRR ≠ better project',
            'Incremental analysis: Extra $50M investment earns 13.1% IRR, exceeding 12% hurdle',
            'Choose Project Y: Creates $14.12M value vs $4.05M, $10M incremental NPV',
            'Board communication: Frame as "more absolute dollars" not "higher percentage"',
            'NPV measures value creation in dollars—the ultimate goal of business',
        ],
    },
    {
        id: 'npv-irr-q-2',
        question:
            'Design a "capital budgeting decision support system" for a corporate finance team. Your system should: (1) Handle non-conventional cash flows with multiple IRRs, (2) Perform sensitivity analysis on key assumptions (discount rate, cash flow growth, terminal value), (3) Incorporate Monte Carlo simulation for uncertain inputs, (4) Generate executive-ready reports with visualizations, (5) Include scenario analysis (base/bull/bear cases). Provide the system architecture, key algorithms, and explain how to handle edge cases like projects with no positive NPV at any reasonable discount rate.',
        sampleAnswer:
            'Production capital budgeting system design: (1) Architecture: Frontend: React dashboard for input and visualization. Backend: FastAPI for calculations, PostgreSQL for storing analyses, Celery for async tasks (Monte Carlo simulations). Core engine: Python class CapitalBudgetingEngine with methods for NPV, IRR, MIRR, sensitivity, Monte Carlo. (2) Handling multiple IRRs: Algorithm: Scan discount rate range [−50% to +200%] in 0.1% increments. Calculate NPV at each point. Identify all zero crossings (sign changes in NPV). For each crossing, use Brent\'s method to refine exact IRR. If multiple IRRs found (non-conventional CF): Warn user, recommend MIRR or NPV only. Display NPV profile chart showing all IRRs. Code: def find_all_irrs(cf): irrs = []; prev_npv = None; for r in np.linspace(−0.5, 2.0, 2500): curr_npv = npv(r, cf); if prev_npv and sign_change(prev_npv, curr_npv): irr_refined = brentq(lambda x: npv(x, cf), r−0.01, r+0.01); irrs.append(irr_refined); prev_npv = curr_npv; if len(irrs) > 1: return irrs, "WARNING: Multiple IRRs detected. Use NPV for decision."; return irrs. (3) Sensitivity analysis: Key inputs: Discount rate (±2%), Revenue growth (±5%), Operating margin (±3%), Terminal growth (±1%), CapEx (±10%). For each parameter: Hold others constant at base case. Vary parameter ±20% in 20 steps. Calculate NPV at each step. Generate tornado chart: Rank parameters by impact on NPV (largest bar = most sensitive). One-way sensitivity charts for each parameter. Two-way sensitivity heatmap (e.g., discount rate vs revenue growth). Code: def sensitivity_analysis(base_case, parameters): results = {}; for param, variance_range in parameters.items(): param_values = np.linspace(base_case[param] * (1−variance_range), base_case[param] * (1+variance_range), 20); npvs = [calculate_npv({**base_case, param: val}) for val in param_values]; results[param] = (param_values, npvs); return results, tornado_chart_data(results). (4) Monte Carlo simulation: Uncertain inputs: Model as probability distributions. Revenue: Normal(μ=10M, σ=2M). CAGR: Triangular(min=5%, mode=10%, max=15%). Discount rate: Uniform(8%, 12%). OpEx margin: Beta(α=2, β=5) scaled to [20%, 40%]. Algorithm: Run 10,000 simulations. Each iteration: Draw random values from input distributions. Calculate project NPV. Store result. Analyze distribution: Mean NPV, Median NPV, Std dev, P10/P50/P90 percentiles, P(NPV > 0) = probability of success, Value at Risk: P5 NPV (5th percentile). Visualization: Histogram of NPV distribution, Cumulative distribution function, Confidence intervals. Code: def monte_carlo(base_case, distributions, n_sims=10000): results = []; for i in range(n_sims): scenario = {param: dist.rvs() for param, dist in distributions.items()}; npv_i = calculate_npv({**base_case, **scenario}); results.append(npv_i); return {'mean': np.mean(results), 'P(success)': sum(r>0 for r in results)/n_sims, 'P10': np.percentile(results, 10), 'P50': np.percentile(results, 50), 'P90': np.percentile(results, 90), 'distribution': results}. (5) Scenario analysis: Define three scenarios: Base case (most likely assumptions). Bull case (optimistic: higher revenue, lower costs, higher exit multiple). Bear case (pessimistic: lower revenue, higher costs, lower exit multiple). For each scenario: Calculate NPV, IRR, Payback. Assign probabilities (e.g., 20% bull, 60% base, 20% bear). Calculate expected NPV = Σ(probability_i × NPV_i). Display scenario comparison table. Code: def scenario_analysis(scenarios, probabilities): results = {}; for scenario_name, assumptions in scenarios.items(): results[scenario_name] = analyze_project(assumptions); expected_npv = sum(prob * results[sc]['NPV'] for sc, prob in zip(scenarios.keys(), probabilities)); return results, expected_npv. (6) Edge cases: No positive NPV at any rate: Check if PV of all future CFs < initial investment at 0% discount (time-value-free). If yes: Project is fundamentally unprofitable. Recommendation: Reject. If no but NPV < 0 at all reasonable rates: Discount rate may be too high. Show NPV at lower rates. Negative cash flows throughout: Flag as unusual. No IRR exists (NPV never crosses zero). Use NPV only. IRR > 10,000%: Cap display at 1000%, note "extremely high return". (7) Executive report: Page 1: Executive summary (recommendation, key metrics). Page 2: NPV walk (from investment to value creation). Page 3: Sensitivity tornado chart (what matters most?). Page 4: Scenario analysis (bull/base/bear). Page 5: Monte Carlo results (distribution, probability of success). Page 6: Assumptions and methodology. Auto-generate with Jinja templates or React components.',
        keyPoints: [
            'Handle multiple IRRs: Scan NPV profile, detect all zero crossings, recommend NPV',
            'Sensitivity analysis: Tornado chart shows which assumptions matter most',
            'Monte Carlo: Model uncertainty with probability distributions, show P(success)',
            'Scenario analysis: Bull/base/bear cases with probability-weighted expected NPV',
            'Edge cases: No IRR exists if NPV never crosses zero—use NPV for decision',
        ],
    },
    {
        id: 'npv-irr-q-3',
        question:
            'A private equity firm is considering acquiring a mature business for $500M. The business generates $80M EBITDA currently, expected to grow 3% annually. The PE firm plans to use $350M debt (7% interest) and $150M equity. Exit is planned in 5 years at 8x EBITDA. Corporate tax rate is 25%. Using leveraged cash flows: (1) Build a 5-year cash flow projection, (2) Calculate equity NPV and equity IRR, (3) Perform sensitivity analysis on exit multiple (6x to 10x) and EBITDA growth (0% to 6%), (4) Calculate the maximum price the PE firm should pay to achieve 25% IRR, (5) Discuss how leverage amplifies returns (and risks).',
        sampleAnswer:
            'Private equity LBO analysis: (1) 5-year projection: Starting EBITDA = $80M, growth = 3% annually. Year 1: EBITDA = $80M × 1.03 = $82.4M. D&A (assume 5% of EBITDA) = $4.1M. EBIT = $82.4 - $4.1 = $78.3M. Interest expense = $350M × 7% = $24.5M. EBT = $78.3 - $24.5 = $53.8M. Taxes (25%) = $13.5M. Net income = $40.4M. Add back D&A = $4.1M. Less CapEx (assume = D&A for maintenance) = $4.1M. Less debt paydown (assume 20% of FCF) = ... Unlevered FCF = EBIT × (1 - tax) + D&A - CapEx = $78.3 × 0.75 + $4.1 - $4.1 = $58.7M. Debt paydown = $58.7M × 20% = $11.7M. Levered FCF to equity = $58.7 - $24.5 interest - $11.7 paydown = $22.5M. Repeat for years 2-5 with 3% EBITDA growth. Year 5: EBITDA = $80M × 1.03^5 = $92.7M. Debt balance = $350M - cumulative paydown. Exit value = Year 5 EBITDA × 8x multiple = $92.7M × 8 = $741.6M. Less remaining debt (assume $290M after paydowns). Equity proceeds = $741.6M - $290M = $451.6M. (2) Equity NPV and IRR: Initial equity investment = $150M. Levered FCF: Year 1-5 (varies). Exit proceeds = $451.6M (net to equity). Equity cash flows = [-150, FCF1, FCF2, FCF3, FCF4, FCF4 + 451.6]. NPV at 25% discount: Calculate PV of each CF. Equity IRR: Solve for rate where NPV = 0. Typically 25-35% for successful PE deals. (3) Sensitivity analysis: Create matrix: Rows = Exit multiples (6x, 7x, 8x, 9x, 10x). Columns = EBITDA growth (0%, 1.5%, 3%, 4.5%, 6%). For each combination: Project cash flows, calculate exit value, compute equity IRR. Display as heatmap: Green cells = IRR > 25% (target). Yellow = 20-25%. Red = <20%. Key insights: Exit multiple matters more than growth (wider range of outcomes). At 6x exit multiple, even 6% growth yields only 18% IRR (below target). At 10x exit multiple, even 0% growth yields 32% IRR (exceeds target). Base case (8x, 3% growth): IRR ≈ 27%. (4) Maximum purchase price for 25% IRR: Work backwards: Target equity IRR = 25%. Exit value = Year 5 EBITDA × 8x = $92.7M × 8 = $741.6M. Required equity proceeds at 25% IRR over 5 years: FV = PV × (1.25)^5. Rearrange: PV = FV / (1.25)^5. But we have cash flows in between, so solve: 0 = -Equity_investment + Σ(FCF_t/(1.25)^t) + Exit_proceeds/(1.25)^5. Solve for equity investment. Add debt: Total enterprise value = equity + debt. Maximum price ≈ $475M (equity $125M + debt $350M) to achieve 25% IRR at base case assumptions. Current price $500M implies IRR ≈ 22%. (5) Leverage amplification: Unlevered returns (all-equity): With $500M all-equity, exit at $741.6M = 48% gain over 5 years = 8.2% IRR. Levered returns (30% equity): With $150M equity, exit proceeds $451.6M = 201% gain = 24.7% IRR. Leverage multiplier: 24.7% / 8.2% = 3x. Why? Debt is cheaper than equity (7% vs 25%). Amplifies gains when exit value > debt. But also amplifies losses! If exit at 6x instead of 8x: Unlevered: $556M exit, +11% gain. Levered: $556M - $290M debt = $266M equity proceeds. On $150M invested = 77% gain vs 201% in base case. Downside protection worse. Risk: If EBITDA declines or exit multiple compresses, equity can be wiped out while debt has priority claim. Key PE insight: Use leverage to boost returns, but only in stable, cash-generative businesses. Margin of safety matters.',
        keyPoints: [
            'Levered cash flows: Subtract interest and debt paydown from unlevered FCF',
            'Exit proceeds: Terminal EBITDA × multiple, less remaining debt = equity value',
            'Sensitivity: Exit multiple has bigger impact on returns than growth rate',
            'Max price for 25% IRR: $475M (implies need to negotiate down from $500M)',
            'Leverage amplifies returns 3x (8% unlevered → 24% levered) but increases risk',
        ],
    },
];

